<?xml version="1.0" encoding="utf-8"?>
<odoo>
	
	<!-- Kanha Family Form View  -->
	<record model="ir.ui.view"
		id="kanha_inherit_view_partner_form">
		<field name="name">kanha.inherit.view.partner.form</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_form" />
		<field name="mode">primary</field>
		<field name="arch" type="xml">
			<xpath expr="//form" position="replace">
				<form string="Kanha Census">
					<header>
						<button name="button_approve" string="Approve" type="object" attrs="{'invisible':[('application_status','!=','to_approve')]}" class="btn-success"/>
						<button name="button_reject" string="Reject" type="object" attrs="{'invisible':[('application_status','!=','to_approve')]}" class="btn-danger"/>
						<field name="application_status" widget="statusbar" />
						<field name="is_geoadmin" invisible="1"/>
					</header>
					<sheet>
						<widget name="web_ribbon" title="Saved Not Submitted"
							bg_color="bg-info"
							attrs="{'invisible': [('state', '=', 'submitted')]}"/>
						<widget name="web_ribbon" title="Submitted"
							bg_color="bg-info"
							attrs="{'invisible': [('state', '=', 'saved_not_submitted')]}"/>
						<field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;image_128&quot;}"/>
						<group>
							<group>
								<field name="name" required="1" readonly="1"/>
								<field name="email" required="1" readonly="1"/>
								<field name="gender" readonly="1"/>
								<!-- <field name="pan_card_number" widget="Encrypted" readonly="1"/> -->
								<field name="aadhaar_card_number" widget="Encrypted" readonly="1" attrs="{'required':[('citizenship','=','Indian')],'invisible': [('is_geoadmin', '=', True)]}"/>
								<field name="is_preceptor" readonly="1"/>
								<field name="abhyasi_id" readonly="1"/>
								<field name="residence_type" readonly="1"/>
								<field name="id" string="Resident ID number" readonly="1"/>
								<!-- <field name="visa_type" readonly="1"/> -->
								<field name="state" invisible="1"/>
								<field name="blood_group" readonly="1"/>
							</group>
							<group>
								<field name="surname" readonly="1"/>
								<field name="mobile" required="1" readonly="1"/>
								<!-- <field name="date_of_birth" readonly="1"/> -->
								<field name="year_of_birth" readonly="1"/>
								<field name="citizenship" readonly="1"/>
								<field name="passport_number" widget="Encrypted"  attrs="{'required':[('citizenship','=','Overseas')],'invisible':[('citizenship','!=','Overseas')]}" readonly="1"/>
								<field name="members_count" readonly="1"/>
								<!-- <field name="visa_start_date" readonly="1" attrs="{'required':[('citizenship','=','Overseas')],'invisible':[('citizenship','!=','Overseas')]}"/>
								<field name="visa_end_date" readonly="1" attrs="{'required':[('citizenship','=','Overseas')],'invisible':[('citizenship','!=','Overseas')]}"/> -->
								<field name="emergency_contact" readonly="1"/>
								<field name="do_you_need_voter_id_in_kanha" readonly="1" />
							</group>
						</group>
						<notebook>
							<page string="Kanha Address" name="kanha_address" >
                        		<group>
		                            <group string="Kanha Address" name="kanha_address">
		                            	<field name="resident_of_kanha_from_date" readonly="1"/>
		                                <!-- <field name="work_profile" readonly="1"/> -->
										<field name="work_profile_id" readonly="1"/>
										<field name="employee_id" readonly="1"/>
										<field name="rfid_card_no"/>
										<field name="department_id" readonly="1"/>
		                                <field name="kanha_location_id" readonly="1"/>
		                                <field name="kanha_house_number_id" string="House Number" readonly="1"/>
		                            </group>
                        		</group>
								<group string="Rejection Reason">
									<field name="rejection_reason" nolabel="1" readonly="1"/>
								</group>
                    		</page>
                    		<page string="Kanha Voter ID" name="kanha_voter_id_info" attrs="{'invisible': ['|', ('do_you_need_voter_id_in_kanha', '=', 'No'), ('citizenship', '!=', 'Indian')]}">
                    			<group>
		                            <group>
			                            <field name="birth_country_id" attrs="{'required':[('citizenship','=','Indian')]}" readonly="1"/>
										<field name="birth_country_name" invisible="1" />
										<field name="birth_state_id" attrs="{'invisible':[('birth_country_name','!=','India')]}" readonly="1"/>
										<field name="birth_state_textfield" attrs="{'invisible':[('birth_country_name','==','India')]}" readonly="1"/>
		                                <field name="birth_district" attrs="{'readonly':[('citizenship','=','Indian')]}"/>
		                              	<!-- <field name="birth_town" attrs="{'required':[('citizenship','=','Indian')]}" readonly="1"/> -->
		                             	<field name="application_reference_no" readonly="1" />
                              		</group>
                              		<group>
		                              	<field name="already_have_kanha_voter_id" attrs="{'readonly':[('citizenship','=','Indian')]}" />
		                              	<field name="change_voter_id_address" attrs="{'invisible':[('already_have_kanha_voter_id','!=','Yes')]}" readonly="1"/>
		                              	<field name="kanha_voter_id_number" widget="Encrypted" attrs="{'invisible':[('already_have_kanha_voter_id','!=','Yes')],'required':[('already_have_kanha_voter_id','=','Yes')]}" readonly="1"/>
		                              	<field name="kanha_voter_id_image" attrs="{'invisible':[('already_have_kanha_voter_id','!=','Yes')]}" readonly="1"/>
		                              	<field name="kanha_voter_id_back_image" attrs="{'invisible':[('already_have_kanha_voter_id','!=','Yes')]}" readonly="1"/>
		                              	<field name="need_new_kanha_voter_id" attrs="{'invisible':[('already_have_kanha_voter_id','!=','No')],'required':[('already_have_kanha_voter_id','=','No')]}" readonly="1"/>
		                              	<field name="application_type" attrs="{'invisible':[('need_new_kanha_voter_id','!=','Yes')],'required':[('need_new_kanha_voter_id','=','Yes')]}" readonly="1"/>
		                              	<field name="declaration_form" required="1" invisible="1"/>
										<!-- attrs="{'invisible':[('application_type','!=','New Application')],'required':[('application_type','=','New Application')]}" readonly="1" -->
                                	</group>
                                </group>
                                <group>
		                            <group string="Relative details">
                                		<field name="relative_name" readonly="1"/>
		                                <field name="relative_surname" readonly="1"/>
		                            	<field name="relation_type" readonly="1"/>
		                            	<field name="relation_other" attrs="{'invisible':[('relation_type','!=','Other')]}" readonly="1"/>
		                            	<field name="relative_aadhaar_card_number" readonly="1"/>
		                          	</group>
		               			</group>
                    		</page>
							<page string="Documents" name="documents" >
                        		<group>
		                            <group string="Documents" name="documents">
		                                <field name="adhar_card" attrs="{'required':[('citizenship','=','Indian')],'invisible': [('is_geoadmin', '=', True)]}" readonly="1"/>
		                                <field name="adhar_card_back_side" attrs="{'required':[('citizenship','=','Indian')],'invisible': [('is_geoadmin', '=', True)]}" readonly="1"/>
		                                <field name="passport_front_image" attrs="{'required':[('citizenship','=','Overseas')], 'invisible':['|',('is_geoadmin', '=', True),('citizenship','!=','Overseas')]}" readonly="1" />
		                                <field name="passport_back_image" attrs="{'required':[('citizenship','=','Overseas')], 'invisible':['|',('is_geoadmin', '=', True),('citizenship','!=','Overseas')]}" readonly="1" />
		                               	<field name="indian_visa" attrs="{'required':[('citizenship','=','Overseas')], 'invisible':[('citizenship','!=','Overseas')]}" readonly="1"/>
		                                <field name="passport_photo" readonly="1" groups="kanha_census.group_geoadmin_access"/>
		                                <field name="address_proof" readonly="1"/>
		                              	<field name="age_proof" readonly="1" groups="kanha_census.group_geoadmin_access"/>
		                            </group>
                        		</group>
                    		</page>
                    		<page string="Vehicle Details" name="vehicle_details" >
                    			<field name="vehicle_details_ids" colspan="4" nolabel="1">
	                            	<tree string="Vehicle Details" create="0">
	                               		<field name="vehicle_number" readonly="1"/>
		                                <field name="vehicle_owner" readonly="1"/>
		                                <field name="vehicle_type" readonly="1"/>
		                                <field name="fasttag_rfid_no" readonly="1"/>
	                            	</tree>
	                            	<form string="Vehicle Details">
		                                <group col="4">
		                                    <field name="vehicle_number" readonly="1"/>
			                                <field name="vehicle_owner" readonly="1"/>
			                                <field name="vehicle_type" readonly="1"/>
			                                <field name="fasttag_rfid_no" readonly="1"/>
		                                </group>
	                            	</form>
                        		</field>
                    		</page>
                    		<page string="Existing Voter ID Details" name="existing_voter_id_details" attrs="{'invisible':['|', ('change_voter_id_address','!=','Yes'), ('citizenship','!=','Indian')]}">
                        		<group>
		                            <group string="Existing Voter ID Details" name="existing_voter_id_details">
		                                <field name="country_id" invisible="1" readonly="1"/>
		                                <field name="state_id" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                              	<field name="assembly_constituency" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                              	<field name="house_number" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                              	<field name="locality" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                         		<field name="town" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                             	<field name="post_office" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                            	<field name="zip" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                            	<field name="district" attrs="{'required':[('change_voter_id_address','=','Yes')]}" readonly="1"/>
		                            </group>
                        		</group>
                    		</page>
                    		<page string="Family Members">
	                    		<field name="family_members_ids" widget="one2many_list">
	                    			<tree string="Family Members">
		                                <field name="name" />
	                                </tree>
	                                <form>
	                             		<group>
			                                <field name="name" readonly="1"/>
	                                  	</group>
	                               	 </form>
	                      		</field>
                   			</page>
						</notebook>
					</sheet>
					 <div class="oe_chatter">
						<field name="message_follower_ids"/>
						<field name="message_ids"/>
					</div>
				</form>
			</xpath>
		</field>
	</record>

	<!-- Kanha Family Tree View  -->
	<record id="kanha_iherit_view_partner_tree"
		model="ir.ui.view">
		<field name="name">res.partner.tree</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_form" />
		<field name="mode">primary</field>
		<field name="arch" type="xml">
			<xpath expr="//form" position="replace">
				<tree string="Kanha Census" sample="1" multi_edit="1">
					<field name="name" />
					<field name="mobile" class="o_force_ltr" optional="show" />
					<field name="email" />
					<field name="gender" />
					<!-- <field name="date_of_birth" /> -->
				</tree>
			</xpath>
		</field>
	</record>

	<menuitem id="menu_applications_root" name="Applications" parent="kanha_census.menu_kanha_census_root" sequence="1"/>

	<!-- All Application Action  -->
	<record id="kanha_partner_action" model="ir.actions.act_window">
		<field name="name">All Applications</field>
		<field name="res_model">res.partner</field>
		<field name="view_mode">tree,form</field>
		<field name="view_ids"
			eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kanha_iherit_view_partner_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('kanha_inherit_view_partner_form')})]" />
	</record>
	
	<!-- Menu item  -->
	<menuitem id="menu_kanha_partner"
          parent="menu_applications_root"
          action="kanha_partner_action"
		  sequence="30"
          />

	<record id="kanha_submitted_application_action" model="ir.actions.act_window">
		<field name="name">Submitted Applications</field>
		<field name="res_model">res.partner</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('application_status','=','to_approve')]</field>
		<field name="view_ids"
			eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kanha_iherit_view_partner_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('kanha_inherit_view_partner_form')})]" />
	</record>

	<!-- Menu item  -->
	<menuitem id="menu_kanha_submitted_application"
          parent="menu_applications_root"
          action="kanha_submitted_application_action"
		  sequence="10"
          />
	
	<record id="kanha_approved_application_action" model="ir.actions.act_window">
		<field name="name">Approved Applications</field>
		<field name="res_model">res.partner</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('application_status','=','approved')]</field>
		<field name="view_ids"
			eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kanha_iherit_view_partner_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('kanha_inherit_view_partner_form')})]" />
	</record>

	<!-- Menu item  -->
	<menuitem id="menu_kanha_approved_application"
          parent="menu_applications_root"
          action="kanha_approved_application_action"
		  sequence="20"
          />


	<record id="kanha_rejected_application_action" model="ir.actions.act_window">
		<field name="name">Rejected Applications</field>
		<field name="res_model">res.partner</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('application_status','=','rejected')]</field>
		<field name="view_ids"
			eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kanha_iherit_view_partner_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('kanha_inherit_view_partner_form')})]" />
	</record>

	<!-- Menu item  -->
	<menuitem id="menu_kanha_rejected_application"
          parent="menu_applications_root"
          action="kanha_rejected_application_action"
		  sequence="20"
          />

</odoo>
