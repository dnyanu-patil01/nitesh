<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="action_report_bulk_bill" model="ir.actions.report">
        <field name="name">Bulk Tailoring Bill</field>
        <field name="model">tailor.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">custom_tailor.report_bulk_bill</field>
        <field name="report_file">custom_tailor.report_bulk_bill</field>
        <field name="print_report_name">'Bulk Bill - %s' % (object.company_name or 'Bulk Order')</field>
        <field name="binding_model_id" ref="model_tailor_order"/>
        <field name="binding_type">report</field>
    </record>

    <template id="report_bulk_bill">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="order">
                <t t-call="web.external_layout">
                    <div class="page" style="font-size: 13px; page-break-inside: avoid;">
                        <style>
                            .double-border { border: 3px double #000; }
                            .compact-table { margin-bottom: 6px; }
                            .compact-table td, .compact-table th { padding: 4px 6px; line-height: 1.2; }
                            .section-title { font-size: 14px; font-weight: bold; margin: 8px 0 4px 0; color: #2c3e50; }
                            .header-bg { background-color: #3498db; color: white; }
                            .alt-bg { background-color: #ecf0f1; }
                            .highlight-bg { background-color: #e8f6fd; }
                            .total-bg { background-color: #d5dbdb; }
                            .bulk-highlight { 
                                background: linear-gradient(135deg, #e8f6fd 0%, #d6eaff 100%);
                                border: 2px solid #3498db;
                                border-radius: 8px;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            }
                            .client-row { border-bottom: 1px solid #bdc3c7; }
                            .client-row:last-child { border-bottom: none; }
                            .terms-highlight { 
                                background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
                                border: 2px solid #f39c12;
                                border-radius: 8px;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            }
                        </style>
                        
                        <div class="double-border" style="padding: 12px;">
                            <div class="text-center">
                                <h2 style="margin: 0; color: #2c3e50; font-size: 18px;"><strong>BULK TAILORING BILL</strong></h2>
                            </div>
                            
                            <div style="margin-top: 10px;">
                                <table class="table table-bordered compact-table double-border" style="width: 100%;">
                                    <tr>
                                        <td width="50%" style="font-weight: bold; text-align: center;" class="header-bg">Bulk Order Details</td>
                                        <td width="50%" style="font-weight: bold; text-align: center;" class="header-bg">Order Information</td>
                                    </tr>
                                    <tr>
                                        <td style="vertical-align: top; padding: 8px;" class="highlight-bg">
                                            <div style="line-height: 1.3;">
                                                <div><strong>Company Name:</strong> <span t-field="order.company_name"/></div>
                                                <div t-if="order.bulk_category_id"><strong>Category:</strong> <span t-field="order.bulk_category_id.name"/></div>
                                                <div><strong>Total Clients:</strong> <span t-field="order.total_bulk_clients"/></div>
                                                <div t-if="order.measurement_type"><strong>Measurement Type:</strong> <span t-field="order.measurement_type" t-options='{"widget": "selection"}'/></div>
                                            </div>
                                        </td>
                                        <td style="vertical-align: top; padding: 8px;" class="highlight-bg">
                                            <div style="line-height: 1.3;">
                                                <div><strong>Bill No:</strong> <span t-field="order.name"/></div>
                                                <div><strong>Bill Date:</strong> <span t-field="order.create_date" t-options='{"format": "dd/MM/yyyy"}'/></div>
                                                <div><strong>Delivery Date:</strong> <span t-field="order.delivery_date" t-options='{"format": "dd/MM/yyyy"}'/></div>
                                                <div><strong>Order Type:</strong> <span t-field="order.order_type"/></div>
                                                <div><strong>Product Type:</strong> <span t-field="order.product_type"/></div>
                                                <div t-if="order.stitching_category"><strong>Stitching Category:</strong> <span t-field="order.stitching_category"/></div>
                                                <div t-if="order.current_work_stage"><strong>Status:</strong> <span t-field="order.current_work_stage"/></div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <div style="margin-top: 10px;" t-if="order.bulk_client_ids">
                                <div class="section-title">Bulk Clients Details</div>
                                <table class="table table-bordered compact-table double-border" style="width: 100%;">
                                    <thead class="header-bg">
                                        <tr>
                                            <th width="30">#</th>
                                            <th>Client ID</th>
                                            <th>Client Name</th>
                                            <th>Mobile</th>
                                            <th>Measurement Type</th>
                                            <th>Remarks</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="client_no" t-value="1"/>
                                        <tr t-foreach="order.bulk_client_ids" t-as="client" t-attf-class="#{client_no % 2 == 0 and 'alt-bg' or ''} client-row">
                                            <td><span t-esc="client_no"/></td>
                                            <td><strong><span t-field="client.client_id"/></strong></td>
                                            <td><span t-field="client.name"/></td>
                                            <td><span t-field="client.mobile"/></td>
                                            <td><span t-field="client.measurement_type" t-options='{"widget": "selection"}'/></td>
                                            <td><span t-field="client.remarks"/></td>
                                            <t t-set="client_no" t-value="client_no + 1"/>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div style="margin-top: 10px;">
                                <div class="section-title">Service Details</div>
                                <table class="table table-bordered compact-table double-border" style="width: 100%;">
                                    <thead class="header-bg">
                                        <tr>
                                            <th width="30">#</th>
                                            <th>Description</th>
                                            <th width="80">Type</th>
                                            <th width="100" style="text-align: right;">Amount (₹)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="line_no" t-value="1"/>
                                        <tr t-if="order.shirt_charges and order.shirt_charges > 0" class="alt-bg">
                                            <td><span t-esc="line_no"/></td>
                                            <td><strong><span t-field="order.stitching_category"/> - Shirt (Bulk)</strong></td>
                                            <td><span t-field="order.order_type"/></td>
                                            <td style="text-align: right;"><strong>₹ <span t-field="order.shirt_charges"/></strong></td>
                                            <t t-set="line_no" t-value="line_no + 1"/>
                                        </tr>
                                        <tr t-if="order.pant_charges and order.pant_charges > 0">
                                            <td><span t-esc="line_no"/></td>
                                            <td><strong><span t-field="order.stitching_category"/> - Pant (Bulk)</strong></td>
                                            <td><span t-field="order.order_type"/></td>
                                            <td style="text-align: right;"><strong>₹ <span t-field="order.pant_charges"/></strong></td>
                                            <t t-set="line_no" t-value="line_no + 1"/>
                                        </tr>
                                        <tr t-if="order.alteration_charges and order.alteration_charges > 0" class="alt-bg">
                                            <td><span t-esc="line_no"/></td>
                                            <td><strong>Alteration Service (Bulk)</strong></td>
                                            <td>Alteration</td>
                                            <td style="text-align: right;"><strong>₹ <span t-field="order.alteration_charges"/></strong></td>
                                            <t t-set="line_no" t-value="line_no + 1"/>
                                        </tr>
                                        <tr t-if="order.urgent_delivery_charges and order.urgent_delivery_charges > 0">
                                            <td><span t-esc="line_no"/></td>
                                            <td><strong>Urgent Delivery Charges (Bulk)</strong></td>
                                            <td>Service</td>
                                            <td style="text-align: right;"><strong>₹ <span t-field="order.urgent_delivery_charges"/></strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div style="display: flex; gap: 10px; margin-top: 10px;">
                                <div style="flex: 1;">
                                    <table class="table table-bordered compact-table double-border" style="width: 100%;">
                                        <tr>
                                            <td style="font-weight: bold; text-align: center;" class="header-bg">Subtotal Information</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;" class="highlight-bg">
                                                <div style="line-height: 1.3;">
                                                    <div><strong>Subtotal:</strong> ₹ <span t-field="order.total_amount"/></div>
                                                    <div><strong>Tax:</strong> ₹ 0.00</div>
                                                    <div style="border-top: 1px solid #ccc; margin-top: 3px; padding-top: 3px;"><strong>Total Amount:</strong> ₹ <span t-field="order.total_amount"/></div>
                                                    <div t-if="order.advance_payment and order.advance_payment > 0"><strong>Advance Paid:</strong> ₹ <span t-field="order.advance_payment"/></div>
                                                    <div t-if="order.pending_payment and order.pending_payment > 0" style="color: #d68910;"><strong>Balance Due:</strong> ₹ <span t-field="order.pending_payment"/></div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div style="flex: 1;">
                                    <table class="table table-bordered compact-table double-border" style="width: 100%;">
                                        <tr>
                                            <td style="font-weight: bold; text-align: center;" class="header-bg">Payment Information</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;" class="highlight-bg">
                                                <div style="line-height: 1.3;">
                                                    <div t-if="order.payment_method"><strong>Payment Method:</strong> <span t-field="order.payment_method"/></div>
                                                    <div t-if="order.delivery_completed" style="margin-top: 5px;">
                                                        <strong>Status:</strong> <span style="background-color: #d4edda; color: #155724; padding: 2px 6px; border-radius: 3px; font-weight: bold; font-size: 11px;">Delivered</span>
                                                    </div>
                                                    <div t-if="not order.delivery_completed" style="margin-top: 5px;">
                                                        <strong>Status:</strong> <span style="background-color: #fff3cd; color: #856404; padding: 2px 6px; border-radius: 3px; font-weight: bold; font-size: 11px;">Pending Delivery</span>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <div style="margin-top: 10px;">
                                <div class="section-title">Work Description</div>
                                <div style="margin-top: 5px; padding: 6px; background-color: #f8f9fa; border-radius: 4px; font-size: 12px;">
                                    <span t-field="order.description"/>
                                    <div t-if="order.remarks" style="margin-top: 5px;">
                                        <strong>Remarks:</strong> <span t-field="order.remarks"/>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-top: 10px;">
                                <div class="section-title">Master Assignment</div>
                                <div class="bulk-highlight" style="padding: 8px;">
                                    <div style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 12px; line-height: 1.3;">
                                        <div t-if="order.measurement_type != 'both'" style="flex: 1; min-width: 200px;">
                                            <div style="font-weight: bold; color: #2980b9; margin-bottom: 3px;">General Masters:</div>
                                            <div t-if="order.measurement_master_id">• Measurement: <span t-field="order.measurement_master_id.name"/></div>
                                            <div t-if="order.cutting_master_id">• Cutting: <span t-field="order.cutting_master_id.name"/></div>
                                            <div t-if="order.stitching_master_id">• Stitching: <span t-field="order.stitching_master_id.name"/></div>
                                        </div>
                                        
                                        <div t-if="order.measurement_type == 'both'" style="flex: 1; min-width: 200px;">
                                            <div style="font-weight: bold; color: #2980b9; margin-bottom: 3px;">Shirt Masters:</div>
                                            <div t-if="order.shirt_measurement_master_id">• Measurement: <span t-field="order.shirt_measurement_master_id.name"/></div>
                                            <div t-if="order.shirt_cutting_master_id">• Cutting: <span t-field="order.shirt_cutting_master_id.name"/></div>
                                            <div t-if="order.shirt_stitching_master_id">• Stitching: <span t-field="order.shirt_stitching_master_id.name"/></div>
                                        </div>
                                        
                                        <div t-if="order.measurement_type == 'both'" style="flex: 1; min-width: 200px;">
                                            <div style="font-weight: bold; color: #2980b9; margin-bottom: 3px;">Pant Masters:</div>
                                            <div t-if="order.pant_measurement_master_id">• Measurement: <span t-field="order.pant_measurement_master_id.name"/></div>
                                            <div t-if="order.pant_cutting_master_id">• Cutting: <span t-field="order.pant_cutting_master_id.name"/></div>
                                            <div t-if="order.pant_stitching_master_id">• Stitching: <span t-field="order.pant_stitching_master_id.name"/></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-top: 10px;">
                                <div class="section-title" style="color: #e74c3c;">⚠️ Terms &amp; Conditions</div>
                                <div class="terms-highlight" style="padding: 8px;">
                                    <div style="display: flex; flex-wrap: wrap; gap: 12px; font-size: 11px; line-height: 1.3;">
                                        <div style="flex: 1; min-width: 250px;">
                                            <div style="font-weight: bold; color: #d35400; margin-bottom: 3px;">📋 PAYMENT TERMS:</div>
                                            <div>• All payments in Indian Rupees (₹)</div>
                                            <div>• Payment due at delivery</div>
                                            <div>• No returns after delivery</div>
                                            <div>• Alterations after fitting = extra charge</div>
                                            <div>• Bulk order cancellation charges apply</div>
                                        </div>
                                        <div style="flex: 1; min-width: 250px;">
                                            <div style="font-weight: bold; color: #d35400; margin-bottom: 3px;">📅 DELIVERY TERMS:</div>
                                            <div>• Delivery dates are approximate</div>
                                            <div>• Items not collected in 30 days = disposed</div>
                                            <div>• Company must inspect at delivery</div>
                                            <div>• Local jurisdiction for disputes</div>
                                            <div>• Bulk delivery schedule as agreed</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                <div style="text-align: center; flex: 1;">
                                    <div style="border-top: 2px solid #2c3e50; width: 150px; margin: 0 auto;"></div>
                                    <div style="margin-top: 5px; font-weight: bold; color: #2c3e50; font-size: 12px;">Authorized Signature</div>
                                </div>
                                <div style="text-align: center; flex: 1;">
                                    <div style="border-top: 2px solid #2c3e50; width: 150px; margin: 0 auto;"></div>
                                    <div style="margin-top: 5px; font-weight: bold; color: #2c3e50; font-size: 12px;">Company Representative</div>
                                </div>
                            </div>

                            <div style="text-align: center; margin-top: 12px; padding: 8px; background-color: #e8f5e8; border-radius: 5px;">
                                <h4 style="margin: 3px 0; font-size: 16px; color: #27ae60;"><strong>🙏 Thank You for Your Business!</strong></h4>
                                <small style="color: #6c757d; font-size: 11px;">
                                    For any queries, please contact us. We appreciate your trust in our services.
                                </small>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>